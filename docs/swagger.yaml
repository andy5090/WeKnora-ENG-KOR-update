basePath: /api/v1
definitions:
  github_com_Tencent_WeKnora_internal_errors.AppError:
    properties:
      code:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.ErrorCode'
      details: {}
      message:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_errors.ErrorCode:
    enum:
    - 1000
    - 1001
    - 1002
    - 1003
    - 1004
    - 1005
    - 1006
    - 1007
    - 1008
    - 1009
    - 1010
    - 2000
    - 2001
    - 2002
    - 2003
    - 2004
    - 2100
    - 2101
    - 2102
    - 2103
    type: integer
    x-enum-varnames:
    - ErrBadRequest
    - ErrUnauthorized
    - ErrForbidden
    - ErrNotFound
    - ErrMethodNotAllowed
    - ErrConflict
    - ErrTooManyRequests
    - ErrInternalServer
    - ErrServiceUnavailable
    - ErrTimeout
    - ErrValidation
    - ErrTenantNotFound
    - ErrTenantAlreadyExists
    - ErrTenantInactive
    - ErrTenantNameRequired
    - ErrTenantInvalidStatus
    - ErrAgentMissingThinkingModel
    - ErrAgentMissingAllowedTools
    - ErrAgentInvalidMaxIterations
    - ErrAgentInvalidTemperature
  github_com_Tencent_WeKnora_internal_types.AgentConfig:
    properties:
      allowed_tools:
        description: List of allowed tool names
        items:
          type: string
        type: array
      knowledge_bases:
        description: Accessible knowledge base IDs
        items:
          type: string
        type: array
      knowledge_ids:
        description: Accessible knowledge IDs (individual documents)
        items:
          type: string
        type: array
      max_iterations:
        description: Maximum number of ReAct iterations
        type: integer
      reflection_enabled:
        description: Whether to enable reflection
        type: boolean
      system_prompt_web_disabled:
        description: Custom prompt when web search is disabled
        type: string
      system_prompt_web_enabled:
        description: Custom prompt when web search is enabled
        type: string
      temperature:
        description: LLM temperature for agent
        type: number
      use_custom_system_prompt:
        description: Whether to use custom system prompt instead of default
        type: boolean
      web_search_enabled:
        description: Whether web search tool is enabled
        type: boolean
      web_search_max_results:
        description: 'Maximum number of web search results (default: 5)'
        type: integer
    type: object
  github_com_Tencent_WeKnora_internal_types.AgentStep:
    properties:
      iteration:
        description: Iteration number (0-indexed)
        type: integer
      thought:
        description: LLM's reasoning/thinking (Think phase)
        type: string
      timestamp:
        description: When this step occurred
        type: string
      tool_calls:
        description: Tools called in this step (Act phase)
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ToolCall'
        type: array
    type: object
  github_com_Tencent_WeKnora_internal_types.AnswerStrategy:
    enum:
    - all
    - random
    type: string
    x-enum-varnames:
    - AnswerStrategyAll
    - AnswerStrategyRandom
  github_com_Tencent_WeKnora_internal_types.ChunkingConfig:
    properties:
      chunk_overlap:
        description: Chunk overlap
        type: integer
      chunk_size:
        description: Chunk size
        type: integer
      enable_multimodal:
        description: EnableMultimodal (deprecated, kept for backward compatibility
          with old data)
        type: boolean
      separators:
        description: Separators
        items:
          type: string
        type: array
    type: object
  github_com_Tencent_WeKnora_internal_types.ContextCompressionStrategy:
    enum:
    - sliding_window
    - smart
    type: string
    x-enum-varnames:
    - ContextCompressionSlidingWindow
    - ContextCompressionSmart
  github_com_Tencent_WeKnora_internal_types.ContextConfig:
    properties:
      compression_strategy:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ContextCompressionStrategy'
        description: 'Compression strategy: "sliding_window" or "smart"'
      max_tokens:
        description: Maximum tokens allowed in LLM context
        type: integer
      recent_message_count:
        description: |-
          For sliding_window: number of messages to keep
          For smart: number of recent messages to keep uncompressed
        type: integer
      summarize_threshold:
        description: 'Summarize threshold: number of messages before summarization'
        type: integer
    type: object
  github_com_Tencent_WeKnora_internal_types.ConversationConfig:
    properties:
      context_template:
        description: ContextTemplate is the prompt template for summarizing retrieval
          results
        type: string
      embedding_top_k:
        type: integer
      enable_query_expansion:
        type: boolean
      enable_rewrite:
        type: boolean
      fallback_prompt:
        type: string
      fallback_response:
        type: string
      fallback_strategy:
        description: Fallback strategy
        type: string
      keyword_threshold:
        type: number
      max_completion_tokens:
        description: MaxTokens is the maximum number of tokens to generate
        type: integer
      max_rounds:
        description: Retrieval & strategy parameters
        type: integer
      prompt:
        type: string
      rerank_model_id:
        type: string
      rerank_threshold:
        type: number
      rerank_top_k:
        type: integer
      rewrite_prompt_system:
        description: Rewrite prompts
        type: string
      rewrite_prompt_user:
        type: string
      summary_model_id:
        description: Model configuration
        type: string
      temperature:
        description: Temperature controls the randomness of the model output
        type: number
      use_custom_context_template:
        type: boolean
      use_custom_system_prompt:
        description: Prompt is the system prompt for normal mode
        type: boolean
      vector_threshold:
        type: number
    type: object
  github_com_Tencent_WeKnora_internal_types.EmbeddingParameters:
    properties:
      dimension:
        type: integer
      truncate_prompt_tokens:
        type: integer
    type: object
  github_com_Tencent_WeKnora_internal_types.ExtractConfig:
    properties:
      enabled:
        type: boolean
      nodes:
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.GraphNode'
        type: array
      relations:
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.GraphRelation'
        type: array
      tags:
        items:
          type: string
        type: array
      text:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.FAQBatchUpsertPayload:
    properties:
      entries:
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQEntryPayload'
        type: array
      knowledge_id:
        type: string
      mode:
        enum:
        - append
        - replace
        type: string
    required:
    - entries
    type: object
  github_com_Tencent_WeKnora_internal_types.FAQConfig:
    properties:
      index_mode:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQIndexMode'
      question_index_mode:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQQuestionIndexMode'
    type: object
  github_com_Tencent_WeKnora_internal_types.FAQEntryFieldsBatchUpdate:
    properties:
      by_id:
        additionalProperties:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQEntryFieldsUpdate'
        description: ByID update by entry ID, key is the entry ID
        type: object
      by_tag:
        additionalProperties:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQEntryFieldsUpdate'
        description: ByTag batch update by Tag, key is TagID (empty string means uncategorized)
        type: object
    type: object
  github_com_Tencent_WeKnora_internal_types.FAQEntryFieldsUpdate:
    properties:
      is_enabled:
        type: boolean
      is_recommended:
        type: boolean
      tag_id:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.FAQEntryPayload:
    properties:
      answer_strategy:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.AnswerStrategy'
      answers:
        items:
          type: string
        type: array
      is_enabled:
        type: boolean
      is_recommended:
        type: boolean
      negative_questions:
        items:
          type: string
        type: array
      similar_questions:
        items:
          type: string
        type: array
      standard_question:
        type: string
      tag_id:
        type: string
      tag_name:
        type: string
    required:
    - answers
    - standard_question
    type: object
  github_com_Tencent_WeKnora_internal_types.FAQIndexMode:
    enum:
    - question_only
    - question_answer
    type: string
    x-enum-varnames:
    - FAQIndexModeQuestionOnly
    - FAQIndexModeQuestionAnswer
  github_com_Tencent_WeKnora_internal_types.FAQQuestionIndexMode:
    enum:
    - combined
    - separate
    type: string
    x-enum-varnames:
    - FAQQuestionIndexModeCombined
    - FAQQuestionIndexModeSeparate
  github_com_Tencent_WeKnora_internal_types.FAQSearchRequest:
    properties:
      match_count:
        type: integer
      query_text:
        type: string
      vector_threshold:
        type: number
    required:
    - query_text
    type: object
  github_com_Tencent_WeKnora_internal_types.FallbackStrategy:
    enum:
    - fixed
    - model
    type: string
    x-enum-comments:
      FallbackStrategyFixed: Fixed response
      FallbackStrategyModel: Model fallback response
    x-enum-descriptions:
    - Fixed response
    - Model fallback response
    x-enum-varnames:
    - FallbackStrategyFixed
    - FallbackStrategyModel
  github_com_Tencent_WeKnora_internal_types.GraphNode:
    properties:
      attributes:
        items:
          type: string
        type: array
      chunks:
        items:
          type: string
        type: array
      name:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.GraphRelation:
    properties:
      node1:
        type: string
      node2:
        type: string
      type:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.ImageProcessingConfig:
    properties:
      model_id:
        description: Model ID
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.Knowledge:
    properties:
      created_at:
        description: Creation time of the knowledge
        type: string
      deleted_at:
        allOf:
        - $ref: '#/definitions/gorm.DeletedAt'
        description: Deletion time of the knowledge
      description:
        description: Description of the knowledge
        type: string
      embedding_model_id:
        description: ID of the embedding model
        type: string
      enable_status:
        description: Enable status of the knowledge
        type: string
      error_message:
        description: Error message of the knowledge
        type: string
      file_hash:
        description: File hash of the knowledge
        type: string
      file_name:
        description: File name of the knowledge
        type: string
      file_path:
        description: File path of the knowledge
        type: string
      file_size:
        description: File size of the knowledge
        type: integer
      file_type:
        description: File type of the knowledge
        type: string
      id:
        description: Unique identifier of the knowledge
        type: string
      knowledge_base_id:
        description: ID of the knowledge base
        type: string
      knowledge_base_name:
        description: Knowledge base name (not stored in database, populated on query)
        type: string
      metadata:
        description: Metadata of the knowledge
        items:
          type: integer
        type: array
      parse_status:
        description: Parse status of the knowledge
        type: string
      processed_at:
        description: Processed time of the knowledge
        type: string
      source:
        description: Source of the knowledge
        type: string
      storage_size:
        description: Storage size of the knowledge
        type: integer
      summary_status:
        description: Summary status for async summary generation
        type: string
      tag_id:
        description: Optional tag ID for categorization within a knowledge base
        type: string
      tenant_id:
        description: Tenant ID
        type: integer
      title:
        description: Title of the knowledge
        type: string
      type:
        description: Type of the knowledge
        type: string
      updated_at:
        description: Last updated time of the knowledge
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.KnowledgeBase:
    properties:
      chunk_count:
        description: Chunk count (not stored in database, calculated on query)
        type: integer
      chunking_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ChunkingConfig'
        description: Chunking configuration
      cos_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.StorageConfig'
        description: Storage config
      created_at:
        description: Creation time of the knowledge base
        type: string
      deleted_at:
        allOf:
        - $ref: '#/definitions/gorm.DeletedAt'
        description: Deletion time of the knowledge base
      description:
        description: Description of the knowledge base
        type: string
      embedding_model_id:
        description: ID of the embedding model
        type: string
      extract_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ExtractConfig'
        description: Extract config
      faq_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQConfig'
        description: FAQConfig stores FAQ specific configuration such as indexing
          strategy
      id:
        description: Unique identifier of the knowledge base
        type: string
      image_processing_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ImageProcessingConfig'
        description: Image processing configuration
      is_processing:
        description: IsProcessing indicates if there is a processing import task (for
          FAQ type knowledge bases)
        type: boolean
      is_temporary:
        description: Whether this knowledge base is temporary (ephemeral) and should
          be hidden from UI
        type: boolean
      knowledge_count:
        description: Knowledge count (not stored in database, calculated on query)
        type: integer
      name:
        description: Name of the knowledge base
        type: string
      processing_count:
        description: ProcessingCount indicates the number of knowledge items being
          processed (for document type knowledge bases)
        type: integer
      question_generation_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.QuestionGenerationConfig'
        description: QuestionGenerationConfig stores question generation configuration
          for document knowledge bases
      summary_model_id:
        description: Summary model ID
        type: string
      tenant_id:
        description: Tenant ID
        type: integer
      type:
        description: Type of the knowledge base (document, faq, etc.)
        type: string
      updated_at:
        description: Last updated time of the knowledge base
        type: string
      vlm_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.VLMConfig'
        description: VLM config
    type: object
  github_com_Tencent_WeKnora_internal_types.KnowledgeBaseConfig:
    properties:
      chunking_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ChunkingConfig'
        description: Chunking configuration
      faq_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQConfig'
        description: FAQ configuration (only for FAQ type knowledge bases)
      image_processing_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ImageProcessingConfig'
        description: Image processing configuration
    type: object
  github_com_Tencent_WeKnora_internal_types.LoginRequest:
    properties:
      email:
        type: string
      password:
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  github_com_Tencent_WeKnora_internal_types.LoginResponse:
    properties:
      message:
        type: string
      refresh_token:
        type: string
      success:
        type: boolean
      tenant:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Tenant'
      token:
        type: string
      user:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.User'
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPAdvancedConfig:
    properties:
      retry_count:
        description: 'Number of retries, default: 3'
        type: integer
      retry_delay:
        description: 'Delay between retries in seconds, default: 1'
        type: integer
      timeout:
        description: 'Timeout in seconds, default: 30'
        type: integer
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPAuthConfig:
    properties:
      api_key:
        type: string
      custom_headers:
        additionalProperties:
          type: string
        type: object
      token:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPEnvVars:
    additionalProperties:
      type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPHeaders:
    additionalProperties:
      type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPService:
    properties:
      advanced_config:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPAdvancedConfig'
      auth_config:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPAuthConfig'
      created_at:
        type: string
      deleted_at:
        $ref: '#/definitions/gorm.DeletedAt'
      description:
        type: string
      enabled:
        type: boolean
      env_vars:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPEnvVars'
        description: Environment variables for stdio
      headers:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPHeaders'
      id:
        type: string
      name:
        type: string
      stdio_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPStdioConfig'
        description: Required for stdio transport
      tenant_id:
        type: integer
      transport_type:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPTransportType'
      updated_at:
        type: string
      url:
        description: 'Optional: required for SSE/HTTP Streamable'
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPStdioConfig:
    properties:
      args:
        description: Command arguments array
        items:
          type: string
        type: array
      command:
        description: 'Command: "uvx" or "npx"'
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.MCPTransportType:
    enum:
    - sse
    - http-streamable
    - stdio
    type: string
    x-enum-comments:
      MCPTransportHTTPStreamable: HTTP Streamable
      MCPTransportSSE: Server-Sent Events
      MCPTransportStdio: Stdio (Standard Input/Output)
    x-enum-descriptions:
    - Server-Sent Events
    - HTTP Streamable
    - Stdio (Standard Input/Output)
    x-enum-varnames:
    - MCPTransportSSE
    - MCPTransportHTTPStreamable
    - MCPTransportStdio
  github_com_Tencent_WeKnora_internal_types.ManualKnowledgePayload:
    properties:
      content:
        type: string
      status:
        type: string
      title:
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.MatchType:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    type: integer
    x-enum-comments:
      MatchTypeDirectLoad: Direct load match type
      MatchTypeParentChunk: Parent Chunk match type
      MatchTypeRelationChunk: Relation Chunk match type
      MatchTypeWebSearch: Web search match type
    x-enum-descriptions:
    - ""
    - ""
    - ""
    - ""
    - Parent Chunk match type
    - Relation Chunk match type
    - ""
    - Web search match type
    - Direct load match type
    x-enum-varnames:
    - MatchTypeEmbedding
    - MatchTypeKeywords
    - MatchTypeNearByChunk
    - MatchTypeHistory
    - MatchTypeParentChunk
    - MatchTypeRelationChunk
    - MatchTypeGraph
    - MatchTypeWebSearch
    - MatchTypeDirectLoad
  github_com_Tencent_WeKnora_internal_types.MentionedItem:
    properties:
      id:
        type: string
      kb_type:
        description: '"document" or "faq" (only for kb type)'
        type: string
      name:
        type: string
      type:
        description: '"kb" for knowledge base, "file" for file'
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.Message:
    properties:
      agent_steps:
        description: |-
          Agent execution steps (only for assistant messages generated by agent)
          This contains the detailed reasoning process and tool calls made by the agent
          Stored for user history display, but NOT included in LLM context to avoid redundancy
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.AgentStep'
        type: array
      content:
        description: Message text content
        type: string
      created_at:
        description: Message creation timestamp
        type: string
      deleted_at:
        allOf:
        - $ref: '#/definitions/gorm.DeletedAt'
        description: Soft delete timestamp
      id:
        description: Unique identifier for the message
        type: string
      is_completed:
        description: Whether message generation is complete
        type: boolean
      knowledge_references:
        description: References to knowledge chunks used in the response
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.SearchResult'
        type: array
      mentioned_items:
        description: |-
          Mentioned knowledge bases and files (for user messages)
          Stores the @mentioned items when user sends a message
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MentionedItem'
        type: array
      request_id:
        description: Request identifier for tracking API requests
        type: string
      role:
        description: 'Message role: "user", "assistant", "system"'
        type: string
      session_id:
        description: ID of the session this message belongs to
        type: string
      updated_at:
        description: Last update timestamp
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.ModelParameters:
    properties:
      api_key:
        type: string
      base_url:
        type: string
      embedding_parameters:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.EmbeddingParameters'
      interface_type:
        type: string
      parameter_size:
        description: Ollama model parameter size (e.g., "7B", "13B", "70B")
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.ModelSource:
    enum:
    - local
    - remote
    - aliyun
    type: string
    x-enum-comments:
      ModelSourceAliyun: Aliyun DashScope model
      ModelSourceLocal: Local model
      ModelSourceRemote: Remote model
    x-enum-descriptions:
    - Local model
    - Remote model
    - Aliyun DashScope model
    x-enum-varnames:
    - ModelSourceLocal
    - ModelSourceRemote
    - ModelSourceAliyun
  github_com_Tencent_WeKnora_internal_types.ModelType:
    enum:
    - Embedding
    - Rerank
    - KnowledgeQA
    - VLLM
    type: string
    x-enum-comments:
      ModelTypeEmbedding: Embedding model
      ModelTypeKnowledgeQA: KnowledgeQA model
      ModelTypeRerank: Rerank model
      ModelTypeVLLM: VLLM model
    x-enum-descriptions:
    - Embedding model
    - Rerank model
    - KnowledgeQA model
    - VLLM model
    x-enum-varnames:
    - ModelTypeEmbedding
    - ModelTypeRerank
    - ModelTypeKnowledgeQA
    - ModelTypeVLLM
  github_com_Tencent_WeKnora_internal_types.QuestionGenerationConfig:
    properties:
      enabled:
        type: boolean
      question_count:
        description: 'Number of questions to generate per chunk (default: 3, max:
          10)'
        type: integer
    type: object
  github_com_Tencent_WeKnora_internal_types.RegisterRequest:
    properties:
      email:
        type: string
      password:
        minLength: 6
        type: string
      username:
        maxLength: 50
        minLength: 3
        type: string
    required:
    - email
    - password
    - username
    type: object
  github_com_Tencent_WeKnora_internal_types.RegisterResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
      tenant:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Tenant'
      user:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.User'
    type: object
  github_com_Tencent_WeKnora_internal_types.RetrieverEngineParams:
    properties:
      retriever_engine_type:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.RetrieverEngineType'
        description: Retriever engine type
      retriever_type:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.RetrieverType'
        description: Retriever type
    type: object
  github_com_Tencent_WeKnora_internal_types.RetrieverEngineType:
    enum:
    - postgres
    - elasticsearch
    - infinity
    - elasticfaiss
    - qdrant
    type: string
    x-enum-varnames:
    - PostgresRetrieverEngineType
    - ElasticsearchRetrieverEngineType
    - InfinityRetrieverEngineType
    - ElasticFaissRetrieverEngineType
    - QdrantRetrieverEngineType
  github_com_Tencent_WeKnora_internal_types.RetrieverEngines:
    properties:
      engines:
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.RetrieverEngineParams'
        type: array
    type: object
  github_com_Tencent_WeKnora_internal_types.RetrieverType:
    enum:
    - keywords
    - vector
    - websearch
    type: string
    x-enum-comments:
      KeywordsRetrieverType: Keywords retriever
      VectorRetrieverType: Vector retriever
      WebSearchRetrieverType: Web search retriever
    x-enum-descriptions:
    - Keywords retriever
    - Vector retriever
    - Web search retriever
    x-enum-varnames:
    - KeywordsRetrieverType
    - VectorRetrieverType
    - WebSearchRetrieverType
  github_com_Tencent_WeKnora_internal_types.SearchParams:
    properties:
      disable_keywords_match:
        type: boolean
      disable_vector_match:
        type: boolean
      keyword_threshold:
        type: number
      knowledge_ids:
        items:
          type: string
        type: array
      match_count:
        type: integer
      query_text:
        type: string
      vector_threshold:
        type: number
    type: object
  github_com_Tencent_WeKnora_internal_types.SearchResult:
    properties:
      chunk_index:
        description: Chunk index
        type: integer
      chunk_metadata:
        description: ChunkMetadata stores chunk-level metadata (e.g., generated questions)
        items:
          type: integer
        type: array
      chunk_type:
        description: Chunk type
        type: string
      content:
        description: Content
        type: string
      end_at:
        description: End at
        type: integer
      id:
        description: ID
        type: string
      image_info:
        description: Image information (JSON format)
        type: string
      knowledge_filename:
        description: |-
          Knowledge file name
          Used for file type knowledge, contains the original file name
        type: string
      knowledge_id:
        description: Knowledge ID
        type: string
      knowledge_source:
        description: |-
          Knowledge source
          Used to indicate the source of the knowledge, such as "url"
        type: string
      knowledge_title:
        description: Knowledge title
        type: string
      match_type:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MatchType'
        description: Match type
      metadata:
        additionalProperties:
          type: string
        description: Metadata
        type: object
      parent_chunk_id:
        description: Parent Chunk ID
        type: string
      score:
        description: Score
        type: number
      seq:
        description: Seq
        type: integer
      start_at:
        description: Start at
        type: integer
      sub_chunk_id:
        description: SubChunkIndex
        items:
          type: string
        type: array
    type: object
  github_com_Tencent_WeKnora_internal_types.Session:
    properties:
      agent_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.SessionAgentConfig'
        description: Agent configuration (session level, only stores enabled and knowledge_bases)
      context_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ContextConfig'
        description: Context management configuration (optional)
      created_at:
        type: string
      deleted_at:
        $ref: '#/definitions/gorm.DeletedAt'
      description:
        description: Description
        type: string
      embedding_top_k:
        description: Vector recall TopK
        type: integer
      enable_rewrite:
        description: Multi-turn rewrite switch
        type: boolean
      fallback_response:
        description: Fixed response content
        type: string
      fallback_strategy:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FallbackStrategy'
        description: Fallback strategy
      id:
        description: ID
        type: string
      keyword_threshold:
        description: Keyword recall threshold
        type: number
      knowledge_base_id:
        description: Strategy configuration
        type: string
      max_rounds:
        description: Multi-turn retention rounds
        type: integer
      rerank_model_id:
        description: Rerank model ID
        type: string
      rerank_threshold:
        description: Rerank threshold
        type: number
      rerank_top_k:
        description: Rerank TopK
        type: integer
      summary_model_id:
        description: Summary model ID
        type: string
      summary_parameters:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.SummaryConfig'
        description: Summary model parameters
      tenant_id:
        description: Tenant ID
        type: integer
      title:
        description: Title
        type: string
      updated_at:
        type: string
      vector_threshold:
        description: Vector recall threshold
        type: number
    type: object
  github_com_Tencent_WeKnora_internal_types.SessionAgentConfig:
    properties:
      agent_mode_enabled:
        description: Whether agent mode is enabled for this session
        type: boolean
      knowledge_bases:
        description: Accessible knowledge base IDs for this session
        items:
          type: string
        type: array
      knowledge_ids:
        description: Accessible knowledge IDs (individual documents) for this session
        items:
          type: string
        type: array
      web_search_enabled:
        description: Whether web search is enabled for this session
        type: boolean
    type: object
  github_com_Tencent_WeKnora_internal_types.StorageConfig:
    properties:
      app_id:
        description: App ID
        type: string
      bucket_name:
        description: Bucket Name
        type: string
      path_prefix:
        description: Path Prefix
        type: string
      provider:
        description: Provider
        type: string
      region:
        description: Region
        type: string
      secret_id:
        description: Secret ID
        type: string
      secret_key:
        description: Secret Key
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.SummaryConfig:
    properties:
      context_template:
        description: Context template
        type: string
      frequency_penalty:
        description: Frequency penalty
        type: number
      max_completion_tokens:
        description: Max completion tokens
        type: integer
      max_tokens:
        description: Max tokens
        type: integer
      no_match_prefix:
        description: No match prefix
        type: string
      presence_penalty:
        description: Presence penalty
        type: number
      prompt:
        description: Prompt
        type: string
      repeat_penalty:
        description: Repeat penalty
        type: number
      seed:
        description: Seed
        type: integer
      temperature:
        description: Temperature
        type: number
      top_k:
        description: TopK
        type: integer
      top_p:
        description: TopP
        type: number
    type: object
  github_com_Tencent_WeKnora_internal_types.Tenant:
    properties:
      agent_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.AgentConfig'
        description: Global Agent configuration for this tenant (default for all sessions)
      api_key:
        description: API key
        type: string
      business:
        description: Business
        type: string
      context_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ContextConfig'
        description: Global Context configuration for this tenant (default for all
          sessions)
      conversation_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ConversationConfig'
        description: Global Conversation configuration for this tenant (default for
          normal mode sessions)
      created_at:
        description: Creation time
        type: string
      deleted_at:
        allOf:
        - $ref: '#/definitions/gorm.DeletedAt'
        description: Deletion time
      description:
        description: Description
        type: string
      id:
        description: ID
        type: integer
      name:
        description: Name
        type: string
      retriever_engines:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.RetrieverEngines'
        description: Retriever engines
      status:
        description: Status
        type: string
      storage_quota:
        description: Storage quota (Bytes), default is 10GB, including vector, original
          file, text, index, etc.
        type: integer
      storage_used:
        description: Storage used (Bytes)
        type: integer
      updated_at:
        description: Last updated time
        type: string
      web_search_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.WebSearchConfig'
        description: Global WebSearch configuration for this tenant
    type: object
  github_com_Tencent_WeKnora_internal_types.ToolCall:
    properties:
      args:
        additionalProperties: true
        description: Tool arguments
        type: object
      duration:
        description: Execution time in milliseconds
        type: integer
      id:
        description: Function call ID from LLM
        type: string
      name:
        description: Tool name
        type: string
      reflection:
        description: Agent's reflection on this tool call result (if enabled)
        type: string
      result:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ToolResult'
        description: Execution result (contains Output)
    type: object
  github_com_Tencent_WeKnora_internal_types.ToolResult:
    properties:
      data:
        additionalProperties: true
        description: Structured data for programmatic use
        type: object
      error:
        description: Error message if execution failed
        type: string
      output:
        description: Human-readable output
        type: string
      success:
        description: Whether the tool executed successfully
        type: boolean
    type: object
  github_com_Tencent_WeKnora_internal_types.User:
    properties:
      avatar:
        description: Avatar URL of the user
        type: string
      can_access_all_tenants:
        description: Whether the user can access all tenants (cross-tenant access)
        type: boolean
      created_at:
        description: Creation time of the user
        type: string
      deleted_at:
        allOf:
        - $ref: '#/definitions/gorm.DeletedAt'
        description: Deletion time of the user
      email:
        description: Email address of the user
        type: string
      id:
        description: Unique identifier of the user
        type: string
      is_active:
        description: Whether the user is active
        type: boolean
      tenant:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Tenant'
        description: Association relationship, not stored in the database
      tenant_id:
        description: Tenant ID that the user belongs to
        type: integer
      updated_at:
        description: Last updated time of the user
        type: string
      username:
        description: Username of the user
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.VLMConfig:
    properties:
      api_key:
        description: API Key
        type: string
      base_url:
        description: Base URL
        type: string
      enabled:
        type: boolean
      interface_type:
        description: 'Interface Type: "ollama" or "openai"'
        type: string
      model_id:
        type: string
      model_name:
        description: |-
          Compatible with old version
          Model Name
        type: string
    type: object
  github_com_Tencent_WeKnora_internal_types.WebSearchConfig:
    properties:
      api_key:
        description: API key (if required)
        type: string
      blacklist:
        description: Blacklist rules list
        items:
          type: string
        type: array
      compression_method:
        description: Compression method: none, summary, extract, rag
        type: string
      document_fragments:
        description: Number of document fragments (for RAG compression)
        type: integer
      embedding_dimension:
        description: Embedding dimension (for RAG compression)
        type: integer
      embedding_model_id:
        description: RAG compression related configuration
        type: string
      include_date:
        description: Whether to include date
        type: boolean
      max_results:
        description: Maximum number of search results
        type: integer
      provider:
        description: Search engine provider ID
        type: string
      rerank_model_id:
        description: Rerank model ID (for RAG compression)
        type: string
    type: object
  gorm.DeletedAt:
    properties:
      time:
        type: string
      valid:
        description: Valid is true if Time is not NULL
        type: boolean
    type: object
  internal_handler.CopyKnowledgeBaseRequest:
    properties:
      source_id:
        type: string
      target_id:
        type: string
    required:
    - source_id
    type: object
  internal_handler.CreateModelRequest:
    properties:
      description:
        type: string
      name:
        type: string
      parameters:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ModelParameters'
      source:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ModelSource'
      type:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ModelType'
    required:
    - name
    - parameters
    - source
    - type
    type: object
  internal_handler.EvaluationRequest:
    properties:
      chat_id:
        description: ID of chat model to use
        type: string
      dataset_id:
        description: ID of dataset to evaluate
        type: string
      knowledge_base_id:
        description: ID of knowledge base to use
        type: string
      rerank_id:
        description: ID of rerank model to use
        type: string
    type: object
  internal_handler.FabriTextRequest:
    properties:
      llm_config:
        $ref: '#/definitions/internal_handler.LLMConfig'
      tags:
        items:
          type: string
        type: array
    type: object
  internal_handler.GetSystemInfoResponse:
    properties:
      build_time:
        type: string
      commit_id:
        type: string
      go_version:
        type: string
      graph_database_engine:
        type: string
      keyword_index_engine:
        type: string
      minio_enabled:
        type: boolean
      vector_store_engine:
        type: string
      version:
        type: string
    type: object
  internal_handler.KBModelConfigRequest:
    properties:
      documentSplitting:
        description: Document chunking configuration
        properties:
          chunkOverlap:
            type: integer
          chunkSize:
            type: integer
          separators:
            items:
              type: string
            type: array
        type: object
      embeddingModelId:
        type: string
      llmModelId:
        type: string
      multimodal:
        description: Multimodal configuration
        properties:
          cos:
            properties:
              appId:
                type: string
              bucketName:
                type: string
              pathPrefix:
                type: string
              region:
                type: string
              secretId:
                type: string
              secretKey:
                type: string
            type: object
          enabled:
            type: boolean
          minio:
            properties:
              bucketName:
                type: string
              pathPrefix:
                type: string
              useSSL:
                type: boolean
            type: object
          storageType:
            description: '"cos" or "minio"'
            type: string
        type: object
      nodeExtract:
        description: Knowledge graph configuration
        properties:
          enabled:
            type: boolean
          nodes:
            items:
              $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.GraphNode'
            type: array
          relations:
            items:
              $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.GraphRelation'
            type: array
          tags:
            items:
              type: string
            type: array
          text:
            type: string
        type: object
      questionGeneration:
        description: Question generation configuration
        properties:
          enabled:
            type: boolean
          questionCount:
            type: integer
        type: object
      vlm_config:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.VLMConfig'
    required:
    - embeddingModelId
    - llmModelId
    type: object
  internal_handler.LLMConfig:
    properties:
      api_key:
        type: string
      base_url:
        type: string
      model_name:
        type: string
      source:
        type: string
    type: object
  internal_handler.RemoteModelCheckRequest:
    properties:
      apiKey:
        type: string
      baseUrl:
        type: string
      modelName:
        type: string
    required:
    - baseUrl
    - modelName
    type: object
  internal_handler.TextRelationExtractionRequest:
    properties:
      llm_config:
        $ref: '#/definitions/internal_handler.LLMConfig'
      tags:
        items:
          type: string
        type: array
      text:
        type: string
    required:
    - tags
    - text
    type: object
  internal_handler.UpdateChunkRequest:
    properties:
      chunk_index:
        type: integer
      content:
        type: string
      embedding:
        items:
          type: number
        type: array
      end_at:
        type: integer
      image_info:
        type: string
      is_enabled:
        type: boolean
      start_at:
        type: integer
    type: object
  internal_handler.UpdateKnowledgeBaseRequest:
    properties:
      config:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.KnowledgeBaseConfig'
      description:
        type: string
      name:
        type: string
    required:
    - config
    - name
    type: object
  internal_handler.UpdateModelRequest:
    properties:
      description:
        type: string
      name:
        type: string
      parameters:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ModelParameters'
      source:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ModelSource'
      type:
        $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ModelType'
    type: object
  internal_handler_session.CreateKnowledgeQARequest:
    properties:
      agent_enabled:
        description: Whether agent mode is enabled for this request
        type: boolean
      knowledge_base_ids:
        description: Selected knowledge base ID for this request
        items:
          type: string
        type: array
      knowledge_ids:
        description: Selected knowledge ID for this request
        items:
          type: string
        type: array
      mentioned_items:
        description: '@mentioned knowledge bases and files'
        items:
          $ref: '#/definitions/internal_handler_session.MentionedItemRequest'
        type: array
      query:
        description: Query text for knowledge base search
        type: string
      summary_model_id:
        description: Optional summary model ID for this request (overrides session
          default)
        type: string
      web_search_enabled:
        description: Whether web search is enabled for this request
        type: boolean
    required:
    - query
    type: object
  internal_handler_session.CreateSessionRequest:
    properties:
      agent_config:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.SessionAgentConfig'
        description: 'Agent configuration (optional, session-level config only: enabled
          and knowledge_bases)'
      knowledge_base_id:
        description: ID of the associated knowledge base (optional, can be set/changed
          during queries)
        type: string
      session_strategy:
        allOf:
        - $ref: '#/definitions/internal_handler_session.SessionStrategy'
        description: Session strategy configuration
    type: object
  internal_handler_session.GenerateTitleRequest:
    properties:
      messages:
        description: Messages to use as context for title generation
        items:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Message'
        type: array
    required:
    - messages
    type: object
  internal_handler_session.MentionedItemRequest:
    properties:
      id:
        type: string
      kb_type:
        description: '"document" or "faq" (only for kb type)'
        type: string
      name:
        type: string
      type:
        description: '"kb" for knowledge base, "file" for file'
        type: string
    type: object
  internal_handler_session.SearchKnowledgeRequest:
    properties:
      knowledge_base_id:
        description: Single knowledge base ID (for backward compatibility)
        type: string
      knowledge_base_ids:
        description: IDs of knowledge bases to search (multi-KB support)
        items:
          type: string
        type: array
      knowledge_ids:
        description: IDs of specific knowledge (files) to search
        items:
          type: string
        type: array
      query:
        description: Query text to search for
        type: string
    required:
    - query
    type: object
  internal_handler_session.SessionStrategy:
    properties:
      embedding_top_k:
        description: Number of top results to retrieve from vector search
        type: integer
      enable_rewrite:
        description: Whether to enable query rewrite for multi-round conversations
        type: boolean
      fallback_response:
        description: Fixed response content for fallback
        type: string
      fallback_strategy:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FallbackStrategy'
        description: Strategy to use when no relevant knowledge is found
      keyword_threshold:
        description: Threshold for keyword-based retrieval
        type: number
      max_rounds:
        description: Maximum number of conversation rounds to maintain
        type: integer
      no_match_prefix:
        description: Prefix for responses when no match is found
        type: string
      rerank_model_id:
        description: ID of the model used for reranking results
        type: string
      rerank_threshold:
        description: Threshold for reranking results
        type: number
      rerank_top_k:
        description: Number of top results after reranking
        type: integer
      summary_model_id:
        description: ID of the model used for summarization
        type: string
      summary_parameters:
        allOf:
        - $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.SummaryConfig'
        description: Parameters for the summary model
      vector_threshold:
        description: Threshold for vector-based retrieval
        type: number
    type: object
  internal_handler_session.StopSessionRequest:
    properties:
      message_id:
        type: string
    required:
    - message_id
    type: object
info:
  contact:
    name: WeKnora Github
    url: https://github.com/Tencent/WeKnora
  description: WeKnora Knowledge Base Management System API Documentation
  termsOfService: http://swagger.io/terms/
  title: WeKnora API
  version: "1.0"
paths:
  /auth/change-password:
    post:
      consumes:
      - application/json
      description: Change the current user's login password
      parameters:
      - description: Password change request
        in: body
        name: request
        required: true
        schema:
          properties:
            new_password:
              type: string
            old_password:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Password changed successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Change password
      tags:
      - Authentication
  /auth/login:
    post:
      consumes:
      - application/json
      description: User login and get access token
      parameters:
      - description: Login request parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.LoginResponse'
        "401":
          description: Authentication failed
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      summary: User login
      tags:
      - Authentication
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Revoke current access token and logout
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: User logout
      tags:
      - Authentication
  /auth/me:
    get:
      consumes:
      - application/json
      description: Get detailed information of the current logged-in user
      produces:
      - application/json
      responses:
        "200":
          description: User information
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Get current user information
      tags:
      - Authentication
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Use refresh token to get a new access token
      parameters:
      - description: Refresh token
        in: body
        name: request
        required: true
        schema:
          properties:
            refreshToken:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: New token
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid token
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      summary: Refresh token
      tags:
      - Authentication
  /auth/register:
    post:
      consumes:
      - application/json
      description: Register a new user account
      parameters:
      - description: Registration request parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.RegisterResponse'
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "403":
          description: Registration feature is disabled
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      summary: User registration
      tags:
      - Authentication
  /auth/validate:
    get:
      consumes:
      - application/json
      description: Verify if the access token is valid
      produces:
      - application/json
      responses:
        "200":
          description: Token is valid
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid token
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Validate token
      tags:
      - Authentication
  /chunks/{knowledge_id}:
    delete:
      consumes:
      - application/json
      description: Delete all chunks under the specified knowledge
      parameters:
      - description: Knowledge ID
        in: path
        name: knowledge_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete all chunks under knowledge
      tags:
      - Chunk Management
    get:
      consumes:
      - application/json
      description: Get all chunk list under the specified knowledge, supports pagination
      parameters:
      - description: Knowledge ID
        in: path
        name: knowledge_id
        required: true
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Chunk list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge chunk list
      tags:
      - Chunk Management
  /chunks/{knowledge_id}/{id}:
    delete:
      consumes:
      - application/json
      description: Delete the specified chunk
      parameters:
      - description: Knowledge ID
        in: path
        name: knowledge_id
        required: true
        type: string
      - description: Chunk ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Chunk not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete chunk
      tags:
      - Chunk Management
    put:
      consumes:
      - application/json
      description: Update the content and properties of the specified chunk
      parameters:
      - description: Knowledge ID
        in: path
        name: knowledge_id
        required: true
        type: string
      - description: Chunk ID
        in: path
        name: id
        required: true
        type: string
      - description: Update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.UpdateChunkRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated chunk
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Chunk not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update chunk
      tags:
      - Chunk Management
  /chunks/by-id/{id}:
    get:
      consumes:
      - application/json
      description: Get chunk details by chunk ID only (knowledge_id not required)
      parameters:
      - description: Chunk ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Chunk details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Chunk not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get chunk by ID
      tags:
      - Chunk Management
  /chunks/by-id/{id}/questions:
    delete:
      consumes:
      - application/json
      description: Delete generated questions in chunk
      parameters:
      - description: Chunk ID
        in: path
        name: id
        required: true
        type: string
      - description: Question ID
        in: body
        name: request
        required: true
        schema:
          properties:
            question_id:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Chunk not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete generated questions
      tags:
      - Chunk Management
  /evaluation/:
    get:
      consumes:
      - application/json
      description: Get evaluation results by task ID
      parameters:
      - description: Evaluation task ID
        in: query
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Evaluation results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get evaluation results
      tags:
      - Evaluation
    post:
      consumes:
      - application/json
      description: Evaluate and test the knowledge base
      parameters:
      - description: Evaluation request parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.EvaluationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Evaluation task
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Execute evaluation
      tags:
      - Evaluation
  /faq/import/progress/{task_id}:
    get:
      consumes:
      - application/json
      description: Get FAQ import task progress
      parameters:
      - description: Task ID
        in: path
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Import progress
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Task not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get FAQ import progress
      tags:
      - FAQ Management
  /initialization/extract/relations:
    post:
      consumes:
      - application/json
      description: Extract entities and relations from text
      parameters:
      - description: Extraction request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.TextRelationExtractionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Extraction results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Extract text relations
      tags:
      - Initialization
  /initialization/fabri/tag:
    get:
      consumes:
      - application/json
      description: Randomly generate a set of tags
      produces:
      - application/json
      responses:
        "200":
          description: Generated tags
          schema:
            additionalProperties: true
            type: object
      summary: Generate random tags
      tags:
      - Initialization
  /initialization/fabri/text:
    post:
      consumes:
      - application/json
      description: Generate example text based on tags
      parameters:
      - description: Generation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.FabriTextRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Generated text
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Generate example text
      tags:
      - Initialization
  /initialization/kb/{kbId}:
    post:
      consumes:
      - application/json
      description: Execute complete configuration update based on knowledge base ID
      parameters:
      - description: Knowledge base ID
        in: path
        name: kbId
        required: true
        type: string
      - description: Initialization request
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Initialization successful
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Initialize knowledge base configuration
      tags:
      - Initialization
  /initialization/kb/{kbId}/config:
    get:
      consumes:
      - application/json
      description: Get current configuration information based on knowledge base ID
      parameters:
      - description: Knowledge base ID
        in: path
        name: kbId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Configuration information
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Knowledge base not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge base configuration
      tags:
      - Initialization
    put:
      consumes:
      - application/json
      description: Update model and chunking configuration based on knowledge base ID
      parameters:
      - description: Knowledge base ID
        in: path
        name: kbId
        required: true
        type: string
      - description: Configuration request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.KBModelConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Knowledge base not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update knowledge base configuration
      tags:
      - Initialization
  /initialization/models/embedding/test:
    post:
      consumes:
      - application/json
      description: Test if Embedding interface is available and return vector dimension
      parameters:
      - description: Embedding test request
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Test results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Test Embedding model
      tags:
      - Initialization
  /initialization/models/remote/check:
    post:
      consumes:
      - application/json
      description: Check if remote API model connection is normal
      parameters:
      - description: Model check request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.RemoteModelCheckRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Check results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Check remote model
      tags:
      - Initialization
  /initialization/models/rerank/check:
    post:
      consumes:
      - application/json
      description: Check if Rerank model connection and functionality are normal
      parameters:
      - description: Rerank check request
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Check results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Check Rerank model
      tags:
      - Initialization
  /initialization/multimodal/test:
    post:
      consumes:
      - multipart/form-data
      description: Upload image to test multimodal processing functionality
      parameters:
      - description: Test image
        in: formData
        name: image
        required: true
        type: file
      - description: VLM model name
        in: formData
        name: vlm_model
        required: true
        type: string
      - description: VLM Base URL
        in: formData
        name: vlm_base_url
        required: true
        type: string
      - description: VLM API Key
        in: formData
        name: vlm_api_key
        type: string
      - description: VLM interface type
        in: formData
        name: vlm_interface_type
        type: string
      - description: Storage type (cos/minio)
        in: formData
        name: storage_type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Test results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Test multimodal functionality
      tags:
      - Initialization
  /initialization/ollama/download/{taskId}:
    get:
      consumes:
      - application/json
      description: Get Ollama model download task progress
      parameters:
      - description: Task ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Download progress
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Task not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get download progress
      tags:
      - Initialization
  /initialization/ollama/download/tasks:
    get:
      consumes:
      - application/json
      description: List all Ollama model download tasks
      produces:
      - application/json
      responses:
        "200":
          description: Task list
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: List download tasks
      tags:
      - Initialization
  /initialization/ollama/models:
    get:
      consumes:
      - application/json
      description: List installed Ollama models
      produces:
      - application/json
      responses:
        "200":
          description: Model list
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: List Ollama models
      tags:
      - Initialization
  /initialization/ollama/models/check:
    post:
      consumes:
      - application/json
      description: Check if the specified Ollama model is installed
      parameters:
      - description: Model name list
        in: body
        name: request
        required: true
        schema:
          properties:
            models:
              items:
                type: string
              type: array
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Model status
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Check Ollama model status
      tags:
      - Initialization
  /initialization/ollama/models/download:
    post:
      consumes:
      - application/json
      description: Asynchronously download the specified Ollama model
      parameters:
      - description: Model name
        in: body
        name: request
        required: true
        schema:
          properties:
            modelName:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Download task information
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Download Ollama model
      tags:
      - Initialization
  /initialization/ollama/status:
    get:
      consumes:
      - application/json
      description: Check if Ollama service is available
      produces:
      - application/json
      responses:
        "200":
          description: Ollama status
          schema:
            additionalProperties: true
            type: object
      summary: Check Ollama service status
      tags:
      - Initialization
  /knowledge-bases:
    get:
      consumes:
      - application/json
      description: Get all knowledge bases of the current tenant
      produces:
      - application/json
      responses:
        "200":
          description: Knowledge base list
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge base list
      tags:
      - Knowledge Base
    post:
      consumes:
      - application/json
      description: Create a new knowledge base
      parameters:
      - description: Knowledge base information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.KnowledgeBase'
      produces:
      - application/json
      responses:
        "201":
          description: Created knowledge base
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create knowledge base
      tags:
      - Knowledge Base
  /knowledge-bases/{id}:
    delete:
      consumes:
      - application/json
      description: Delete the specified knowledge base and all its content
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete knowledge base
      tags:
      - Knowledge Base
    get:
      consumes:
      - application/json
      description: Get knowledge base details by ID
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Knowledge base details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Knowledge base not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge base details
      tags:
      - Knowledge Base
    put:
      consumes:
      - application/json
      description: Update knowledge base name, description and configuration
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.UpdateKnowledgeBaseRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated knowledge base
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update knowledge base
      tags:
      - Knowledge Base
  /knowledge-bases/{id}/faq/entries:
    delete:
      consumes:
      - application/json
      description: Batch delete specified FAQ entries
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: List of FAQ IDs to delete
        in: body
        name: request
        required: true
        schema:
          properties:
            ids:
              items:
                type: string
              type: array
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Batch delete FAQ entries
      tags:
      - FAQ Management
    get:
      consumes:
      - application/json
      description: Get FAQ entry list under knowledge base, supports pagination and filtering
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: page_size
        type: integer
      - description: Tag ID filter
        in: query
        name: tag_id
        type: string
      - description: Keyword search
        in: query
        name: keyword
        type: string
      - description: 'Search fields: standard_question (standard question), similar_questions (similar questions), answers (answers),
          default searches all'
        in: query
        name: search_field
        type: string
      - description: 'Sort order: asc (ascending by update time), default is descending by update time'
        in: query
        name: sort_order
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: FAQ list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get FAQ entry list
      tags:
      - FAQ Management
    post:
      consumes:
      - application/json
      description: Asynchronously batch update or insert FAQ entries
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Batch operation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQBatchUpsertPayload'
      produces:
      - application/json
      responses:
        "200":
          description: Task ID
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Batch update/insert FAQ entries
      tags:
      - FAQ Management
  /knowledge-bases/{id}/faq/entries/{entry_id}:
    get:
      consumes:
      - application/json
      description: Get single FAQ entry details by ID
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: FAQ entry ID
        in: path
        name: entry_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: FAQ entry details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Entry not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get FAQ entry details
      tags:
      - FAQ Management
    put:
      consumes:
      - application/json
      description: Update the specified FAQ entry
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: FAQ entry ID
        in: path
        name: entry_id
        required: true
        type: string
      - description: FAQ entry
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQEntryPayload'
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update FAQ entry
      tags:
      - FAQ Management
  /knowledge-bases/{id}/faq/entries/export:
    get:
      consumes:
      - application/json
      description: Export all FAQ entries as CSV file
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - text/csv
      responses:
        "200":
          description: CSV file
          schema:
            type: file
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Export FAQ entries
      tags:
      - FAQ Management
  /knowledge-bases/{id}/faq/entries/fields:
    put:
      consumes:
      - application/json
      description: Batch update multiple fields of FAQ entries (is_enabled, is_recommended, tag_id)
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Field update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQEntryFieldsBatchUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Batch update FAQ fields
      tags:
      - FAQ Management
  /knowledge-bases/{id}/faq/entries/tags:
    put:
      consumes:
      - application/json
      description: Batch update FAQ entry tags
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Tag update request
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Batch update FAQ tags
      tags:
      - FAQ Management
  /knowledge-bases/{id}/faq/entry:
    post:
      consumes:
      - application/json
      description: Synchronously create a single FAQ entry
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: FAQ entry
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQEntryPayload'
      produces:
      - application/json
      responses:
        "200":
          description: Created FAQ entry
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create single FAQ entry
      tags:
      - FAQ Management
  /knowledge-bases/{id}/faq/search:
    post:
      consumes:
      - application/json
      description: Search in FAQ using hybrid search
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Search request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.FAQSearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Search results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Search FAQ
      tags:
      - FAQ Management
  /knowledge-bases/{id}/hybrid-search:
    get:
      consumes:
      - application/json
      description: Execute vector and keyword hybrid search in knowledge base
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Search parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.SearchParams'
      produces:
      - application/json
      responses:
        "200":
          description: Search results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Hybrid search
      tags:
      - Knowledge Base
  /knowledge-bases/{id}/knowledge:
    get:
      consumes:
      - application/json
      description: Get knowledge list under knowledge base, supports pagination and filtering
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: page_size
        type: integer
      - description: Tag ID filter
        in: query
        name: tag_id
        type: string
      - description: Keyword search
        in: query
        name: keyword
        type: string
      - description: File type filter
        in: query
        name: file_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Knowledge list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge list
      tags:
      - Knowledge Management
  /knowledge-bases/{id}/knowledge/file:
    post:
      consumes:
      - multipart/form-data
      description: Upload file and create knowledge entry
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Uploaded file
        in: formData
        name: file
        required: true
        type: file
      - description: Custom file name
        in: formData
        name: fileName
        type: string
      - description: Metadata JSON
        in: formData
        name: metadata
        type: string
      - description: Enable multimodal processing
        in: formData
        name: enable_multimodel
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: Created knowledge
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "409":
          description: File duplicate
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create knowledge from file
      tags:
      - Knowledge Management
  /knowledge-bases/{id}/knowledge/manual:
    post:
      consumes:
      - application/json
      description: Manually enter knowledge content in Markdown format
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Manual knowledge content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ManualKnowledgePayload'
      produces:
      - application/json
      responses:
        "200":
          description: Created knowledge
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Manually create knowledge
      tags:
      - Knowledge Management
  /knowledge-bases/{id}/knowledge/url:
    post:
      consumes:
      - application/json
      description: Fetch content from specified URL and create knowledge entry
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: URL request
        in: body
        name: request
        required: true
        schema:
          properties:
            enable_multimodel:
              type: boolean
            title:
              type: string
            url:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created knowledge
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "409":
          description: URL duplicate
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create knowledge from URL
      tags:
      - Knowledge Management
  /knowledge-bases/{id}/tags:
    get:
      consumes:
      - application/json
      description: Get all tags and statistics under knowledge base
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: page_size
        type: integer
      - description: Keyword search
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tag list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get tag list
      tags:
      - Tag Management
    post:
      consumes:
      - application/json
      description: Create new tag under knowledge base
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Tag information
        in: body
        name: request
        required: true
        schema:
          properties:
            color:
              type: string
            name:
              type: string
            sort_order:
              type: integer
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Created tag
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create tag
      tags:
      - Tag Management
  /knowledge-bases/{id}/tags/{tag_id}:
    delete:
      consumes:
      - application/json
      description: Delete tag, use force=true to force delete referenced tags, content_only=true to only delete content under tag while keeping the tag itself
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Tag ID
        in: path
        name: tag_id
        required: true
        type: string
      - description: Force delete
        in: query
        name: force
        type: boolean
      - description: Delete content only, keep tag
        in: query
        name: content_only
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete tag
      tags:
      - Tag Management
    put:
      consumes:
      - application/json
      description: Update tag information
      parameters:
      - description: Knowledge base ID
        in: path
        name: id
        required: true
        type: string
      - description: Tag ID
        in: path
        name: tag_id
        required: true
        type: string
      - description: Tag update information
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated tag
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update tag
      tags:
      - Tag Management
  /knowledge-bases/copy:
    post:
      consumes:
      - application/json
      description: Copy content from one knowledge base to another (async task)
      parameters:
      - description: Copy request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.CopyKnowledgeBaseRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Task ID
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Copy knowledge base
      tags:
      - Knowledge Base
  /knowledge-bases/copy/progress/{task_id}:
    get:
      consumes:
      - application/json
      description: Get knowledge base copy task progress
      parameters:
      - description: Task ID
        in: path
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Progress information
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Task not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge base copy progress
      tags:
      - Knowledge Base
  /knowledge/{id}:
    delete:
      consumes:
      - application/json
      description: Delete knowledge entry by ID
      parameters:
      - description: Knowledge ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete knowledge
      tags:
      - Knowledge Management
    get:
      consumes:
      - application/json
      description: Get knowledge entry details by ID
      parameters:
      - description: Knowledge ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Knowledge details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Knowledge not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get knowledge details
      tags:
      - Knowledge Management
    put:
      consumes:
      - application/json
      description: Update knowledge entry information
      parameters:
      - description: Knowledge ID
        in: path
        name: id
        required: true
        type: string
      - description: Knowledge information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Knowledge'
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update knowledge
      tags:
      - Knowledge Management
  /knowledge/{id}/download:
    get:
      consumes:
      - application/json
      description: Download original file associated with knowledge entry
      parameters:
      - description: Knowledge ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: File content
          schema:
            type: file
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Download knowledge file
      tags:
      - Knowledge Management
  /knowledge/batch:
    get:
      consumes:
      - application/json
      description: Batch get knowledge entries by ID list
      parameters:
      - collectionFormat: csv
        description: Knowledge ID list
        in: query
        items:
          type: string
        name: ids
        required: true
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: Knowledge list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Batch get knowledge
      tags:
      - Knowledge Management
  /knowledge/image/{id}/{chunk_id}:
    put:
      consumes:
      - application/json
      description: Update image information of knowledge chunk
      parameters:
      - description: Knowledge ID
        in: path
        name: id
        required: true
        type: string
      - description: Chunk ID
        in: path
        name: chunk_id
        required: true
        type: string
      - description: Image information
        in: body
        name: request
        required: true
        schema:
          properties:
            image_info:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update image information
      tags:
      - Knowledge Management
  /knowledge/manual/{id}:
    put:
      consumes:
      - application/json
      description: Update manually entered Markdown knowledge content
      parameters:
      - description: Knowledge ID
        in: path
        name: id
        required: true
        type: string
      - description: Manual knowledge content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.ManualKnowledgePayload'
      produces:
      - application/json
      responses:
        "200":
          description: Updated knowledge
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update manual knowledge
      tags:
      - Knowledge Management
  /knowledge/search:
    get:
      consumes:
      - application/json
      description: Search knowledge files by keyword across all knowledge bases
      parameters:
      - description: Keyword to search
        in: query
        name: keyword
        type: string
      - description: Offset for pagination
        in: query
        name: offset
        type: integer
      - description: Limit for pagination (default 20)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Search results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Search knowledge
      tags:
      - Knowledge
  /knowledge/tags:
    put:
      consumes:
      - application/json
      description: Batch update knowledge entry tags
      parameters:
      - description: Tag update request
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Batch update knowledge tags
      tags:
      - Knowledge Management
  /mcp-services:
    get:
      consumes:
      - application/json
      description: Get all MCP services of the current tenant
      produces:
      - application/json
      responses:
        "200":
          description: MCP service list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get MCP service list
      tags:
      - MCP Service
    post:
      consumes:
      - application/json
      description: Create new MCP service configuration
      parameters:
      - description: MCP service configuration
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.MCPService'
      produces:
      - application/json
      responses:
        "200":
          description: Created MCP service
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create MCP service
      tags:
      - MCP Service
  /mcp-services/{id}:
    delete:
      consumes:
      - application/json
      description: Delete the specified MCP service
      parameters:
      - description: MCP service ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete MCP service
      tags:
      - MCP Service
    get:
      consumes:
      - application/json
      description: Get MCP service details by ID
      parameters:
      - description: MCP service ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: MCP service details
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Service not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get MCP service details
      tags:
      - MCP Service
    put:
      consumes:
      - application/json
      description: Update MCP service configuration
      parameters:
      - description: MCP service ID
        in: path
        name: id
        required: true
        type: string
      - description: Update fields
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated MCP service
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update MCP service
      tags:
      - MCP Service
  /mcp-services/{id}/resources:
    get:
      consumes:
      - application/json
      description: Get resource list provided by MCP service
      parameters:
      - description: MCP service ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Resource list
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get MCP service resource list
      tags:
      - MCP Service
  /mcp-services/{id}/test:
    post:
      consumes:
      - application/json
      description: Test if MCP service can connect normally
      parameters:
      - description: MCP service ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Test results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Test MCP service connection
      tags:
      - MCP Service
  /mcp-services/{id}/tools:
    get:
      consumes:
      - application/json
      description: Get tool list provided by MCP service
      parameters:
      - description: MCP service ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tool list
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get MCP service tool list
      tags:
      - MCP Service
  /messages/{session_id}/{id}:
    delete:
      consumes:
      - application/json
      description: Delete specified message from session
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - description: Message ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete message
      tags:
      - Message
  /messages/{session_id}/load:
    get:
      consumes:
      - application/json
      description: Load session message history, supports pagination and time filtering
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - default: 20
        description: Return count
        in: query
        name: limit
        type: integer
      - description: Messages before this time (RFC3339Nano format)
        in: query
        name: before_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Message list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Load message history
      tags:
      - Message
  /models:
    get:
      consumes:
      - application/json
      description: Get all models of the current tenant
      produces:
      - application/json
      responses:
        "200":
          description: Model list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get model list
      tags:
      - Model Management
    post:
      consumes:
      - application/json
      description: Create new model configuration
      parameters:
      - description: Model information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.CreateModelRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created model
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create model
      tags:
      - Model Management
  /models/{id}:
    delete:
      consumes:
      - application/json
      description: Delete the specified model
      parameters:
      - description: Model ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Model not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete model
      tags:
      - Model Management
    get:
      consumes:
      - application/json
      description: Get model details by ID
      parameters:
      - description: Model ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Model details
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Model not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get model details
      tags:
      - Model Management
    put:
      consumes:
      - application/json
      description: Update model configuration information
      parameters:
      - description: Model ID
        in: path
        name: id
        required: true
        type: string
      - description: Update information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler.UpdateModelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated model
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Model not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update model
      tags:
      - Model Management
  /sessions:
    get:
      consumes:
      - application/json
      description: Get current tenant's session list, supports pagination
      parameters:
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Session list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get session list
      tags:
      - Session
    post:
      consumes:
      - application/json
      description: Create new conversation session
      parameters:
      - description: Session creation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler_session.CreateSessionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created session
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Create session
      tags:
      - Session
  /sessions/{id}:
    delete:
      consumes:
      - application/json
      description: Delete the specified session
      parameters:
      - description: Session ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Delete session
      tags:
      - Session
    get:
      consumes:
      - application/json
      description: Get session details by ID
      parameters:
      - description: Session ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Session details
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get session details
      tags:
      - Session
    put:
      consumes:
      - application/json
      description: Update session properties
      parameters:
      - description: Session ID
        in: path
        name: id
        required: true
        type: string
      - description: Session information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Session'
      produces:
      - application/json
      responses:
        "200":
          description: Updated session
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update session
      tags:
      - Session
  /sessions/{session_id}/agent-qa:
    post:
      consumes:
      - application/json
      description: Agent-based intelligent Q&A, supports multi-turn conversation and SSE streaming response
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - description: Q&A request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler_session.CreateKnowledgeQARequest'
      produces:
      - text/event-stream
      responses:
        "200":
          description: Q&A result (SSE stream)
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Agent Q&A
      tags:
      - Q&A
  /sessions/{session_id}/continue:
    get:
      consumes:
      - application/json
      description: Continue getting ongoing streaming response
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - description: Message ID
        in: query
        name: message_id
        required: true
        type: string
      produces:
      - text/event-stream
      responses:
        "200":
          description: Streaming response
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Session or message not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Continue streaming response
      tags:
      - Q&A
  /sessions/{session_id}/knowledge-qa:
    post:
      consumes:
      - application/json
      description: Knowledge base-based Q&A (using LLM summary), supports SSE streaming response
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - description: Q&A request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler_session.CreateKnowledgeQARequest'
      produces:
      - text/event-stream
      responses:
        "200":
          description: Q&A result (SSE stream)
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Knowledge Q&A
      tags:
      - Q&A
  /sessions/{session_id}/stop:
    post:
      consumes:
      - application/json
      description: Stop the currently ongoing generation task
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - description: Stop request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler_session.StopSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Stop successful
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Session or message not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Stop generation
      tags:
      - Q&A
  /sessions/{session_id}/title:
    post:
      consumes:
      - application/json
      description: Automatically generate session title based on message content
      parameters:
      - description: Session ID
        in: path
        name: session_id
        required: true
        type: string
      - description: Generation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler_session.GenerateTitleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Generated title
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Generate session title
      tags:
      - Session
  /sessions/search:
    post:
      consumes:
      - application/json
      description: Search in knowledge base (without LLM summary)
      parameters:
      - description: Search request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handler_session.SearchKnowledgeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Search results
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Knowledge search
      tags:
      - Q&A
  /system/info:
    get:
      consumes:
      - application/json
      description: Get system version, build information and engine configuration
      produces:
      - application/json
      responses:
        "200":
          description: System information
          schema:
            $ref: '#/definitions/internal_handler.GetSystemInfoResponse'
      summary: Get system information
      tags:
      - System
  /tenants:
    get:
      consumes:
      - application/json
      description: Get list of tenants accessible by current user
      produces:
      - application/json
      responses:
        "200":
          description: Tenant list
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Get tenant list
      tags:
      - Tenant Management
    post:
      consumes:
      - application/json
      description: Create new tenant
      parameters:
      - description: Tenant information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Tenant'
      produces:
      - application/json
      responses:
        "201":
          description: Created tenant
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Create tenant
      tags:
      - Tenant Management
  /tenants/{id}:
    delete:
      consumes:
      - application/json
      description: Delete the specified tenant
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Delete tenant
      tags:
      - Tenant Management
    get:
      consumes:
      - application/json
      description: Get tenant details by ID
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Tenant details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
        "404":
          description: Tenant not found
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get tenant details
      tags:
      - Tenant Management
    put:
      consumes:
      - application/json
      description: Update tenant information
      parameters:
      - description: Tenant ID
        in: path
        name: id
        required: true
        type: integer
      - description: Tenant information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_Tencent_WeKnora_internal_types.Tenant'
      produces:
      - application/json
      responses:
        "200":
          description: Updated tenant
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Update tenant
      tags:
      - Tenant Management
  /tenants/all:
    get:
      consumes:
      - application/json
      description: Get all tenants in the system (requires cross-tenant access permission)
      produces:
      - application/json
      responses:
        "200":
          description: All tenant list
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Insufficient permissions
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      summary: Get all tenant list
      tags:
      - Tenant Management
  /tenants/kv/{key}:
    get:
      consumes:
      - application/json
      description: Get tenant-level KV configuration (supports agent-config, web-search-config, conversation-config)
      parameters:
      - description: Configuration key name
        in: path
        name: key
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Configuration value
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Unsupported key
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get tenant KV configuration
      tags:
      - Tenant Management
    put:
      consumes:
      - application/json
      description: Update tenant-level KV configuration (supports agent-config, web-search-config, conversation-config)
      parameters:
      - description: Configuration key name
        in: path
        name: key
        required: true
        type: string
      - description: Configuration value
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Unsupported key
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Update tenant KV configuration
      tags:
      - Tenant Management
  /tenants/kv/agent-config:
    get:
      consumes:
      - application/json
      description: Get tenant's global Agent configuration (applied to all sessions by default)
      produces:
      - application/json
      responses:
        "200":
          description: Agent configuration
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get tenant Agent configuration
      tags:
      - Tenant Management
  /tenants/kv/conversation-config:
    get:
      consumes:
      - application/json
      description: Get tenant's global conversation configuration (applied to normal mode sessions by default)
      produces:
      - application/json
      responses:
        "200":
          description: Conversation configuration
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get tenant conversation configuration
      tags:
      - Tenant Management
  /tenants/kv/web-search-config:
    get:
      consumes:
      - application/json
      description: Get tenant's web search configuration
      produces:
      - application/json
      responses:
        "200":
          description: Web search configuration
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get tenant web search configuration
      tags:
      - Tenant Management
  /tenants/search:
    get:
      consumes:
      - application/json
      description: Paginated search tenants (requires cross-tenant access permission)
      parameters:
      - description: Search keyword
        in: query
        name: keyword
        type: string
      - description: Tenant ID filter
        in: query
        name: tenant_id
        type: integer
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Search results
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Insufficient permissions
          schema:
            $ref: '#/definitions/github_com_Tencent_WeKnora_internal_errors.AppError'
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Search tenants
      tags:
      - Tenant Management
  /web-search/providers:
    get:
      consumes:
      - application/json
      description: Returns the list of available web search providers from configuration
      produces:
      - application/json
      responses:
        "200":
          description: List of providers
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      - ApiKeyAuth: []
      summary: Get available web search providers
      tags:
      - web-search
securityDefinitions:
  ApiKeyAuth:
    description: Tenant authentication: Enter API Key starting with sk-
    in: header
    name: X-API-Key
    type: apiKey
  Bearer:
    description: User login authentication: Enter JWT token in Bearer {token} format
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
